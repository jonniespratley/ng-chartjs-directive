/**
 * angular-chartjs-directive
 * @version v0.0.1 - 2013-10-19
 * @link https://github.com/jonniespratley/angular-chartjs-directive
 * @author Jonnie Spratley <jonniespratley@me.com>
 * @license MIT License, http://www.opensource.org/licenses/MIT
 */
(function(){"use strict";angular.module("jonniespratley.angularChartjsDirective",[]).directive("chartJs",function(){return{scope:{id:"@",title:"@",type:"@",width:"@",height:"@",options:"@",data:"@",ngModel:"="},restrict:"E",replace:!0,require:"?ngModel",template:'<div class="chartjs"><legend ng-show="{{title}}">{{title}}</legend><div class="chartjs-wrap"><canvas id="chart_{{id}}" width="{{width}}" height="{{height}}">Content</canvas></div></div>',link:function(a,b,c,d){var e,f,g,h,i,j,k,l,m,n;return l=new Date(1,1,2e3,12,"00","00"),m=!1,h=100,i="#chart_"+c.id,j=c.options,n=c.type,g=[],d?(k=function(){return new Date-l<h?setTimeout(k,h):(m=!1,e())},angular.element(window).resize(function(){return l=new Date,m===!1?(m=!0,setTimeout(k,h)):void 0}),f=function(b,c,d,e){var f,g,h,i;switch(f=angular.element(b).get(0).getContext("2d"),h=null,g=angular.extend({},e),i=angular.element(b).parent(),a.$apply(function(){return a.width=f.width=i.width(),a.height=f.height=i.height()}),c){case"line":h=new Chart(f).Line(d,g);break;case"bar":h=new Chart(f).Bar(d,g);break;case"doughnut":h=new Chart(f).Doughnut(d,g);break;case"pie":h=new Chart(f).Pie(d,g);break;case"polar":h=new Chart(f).PolarArea(d,g);break;case"radar":h=new Chart(f).Radar(d,g);break;default:h=new Chart(f).Line(d,g)}return h},e=function(){return setTimeout(function(){return f(i,n,g,j)},500)},a.$watch("ngModel",function(a,b){return d.$setViewValue(a),g=d.$viewValue,console.log("Model $viewValue:",d,a,b),d.$render=function(){return e()}}),c.$observe("type",function(a){return n=String(a).toLowerCase(),e()}),c.$observe("data",function(a){return g=angular.fromJson(a),e()})):void 0}}})}).call(this);